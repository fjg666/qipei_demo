(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-myWallet-recharge"],{"083c":function(e,t,a){var i=a("5bbe");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("5f08129a",i,!0,{sourceMap:!1,shadowMode:!1})},"0e02":function(e,t,a){"use strict";a.r(t);var i=a("830e"),n=a("623e");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("fbb0");var c=a("2877"),s=Object(c["a"])(n["default"],i["a"],i["b"],!1,null,"5c02fcf1",null);t["default"]=s.exports},"36bf":function(e,t,a){var i=a("5ba3");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("9f42c6ac",i,!0,{sourceMap:!1,shadowMode:!1})},"453f":function(e,t,a){"use strict";var i=a("36bf"),n=a.n(i);n.a},5152:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:"display:flex;height:"+e.BoxHeight},[a("div",{staticClass:"head",class:{head_w:"秒杀"==e.title}},[a("div",{class:{white:!e.navWhite},style:{height:e.halfWidth}}),a("div",{staticClass:"header"},[e.flag&&!e.returnFlag?a("div",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._back1.apply(void 0,arguments)}}},["秒杀"==e.title?a("img",{attrs:{src:e.back1}}):a("img",{attrs:{src:e.back}})]):e._e(),e.flag||e.returnFlag?e._e():a("img",{staticClass:"header_img",attrs:{src:e.bback},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._back1.apply(void 0,arguments)}}}),a("p",{class:{title_w:"秒杀"==e.title}},[e._v(e._s(e.title))])])])])},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"5ba3":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".head[data-v-2dde4b93]{position:fixed;left:0;top:0;background-color:#fff;width:100%;z-index:9999;border-bottom:1px solid #eee}.head .white[data-v-2dde4b93]{background:#fff}.header[data-v-2dde4b93]{color:#fff;border:none}.header img[data-v-2dde4b93]{position:absolute;top:%?26?%;left:%?20?%;width:%?24?%;height:%?36?%}.header a[data-v-2dde4b93]{position:absolute;width:%?36?%;height:%?36?%;border-radius:50%}.header_img[data-v-2dde4b93]{top:%?46?%!important;left:%?10?%!important;width:%?64?%!important;height:%?64?%!important}.header p[data-v-2dde4b93]{text-align:center;width:100%;height:100%;line-height:%?88?%;color:#020202;font-size:%?32?%}.header>div[data-v-2dde4b93]{height:%?88?%;width:%?160?%;position:absolute;z-index:9999}.head_w[data-v-2dde4b93]{background:transparent;border-bottom:0}.title_w[data-v-2dde4b93]{color:#fff!important}",""])},"5bbe":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".box[data-v-5c02fcf1]{background-color:#f4f4f4;height:100vh}.recharge_ts[data-v-5c02fcf1]{margin:0 %?30?%;font-size:%?22?%;color:#9d9d9d;position:relative;padding:%?19?% 0}.recharge_money[data-v-5c02fcf1]{background-color:#fff;padding:%?30?%;font-size:%?28?%;color:#020202;position:relative;margin-bottom:%?20?%}.recharge_money[data-v-5c02fcf1],.recharge_ts[data-v-5c02fcf1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.recharge_money uni-input[data-v-5c02fcf1]{border:none;margin-left:%?38?%}.setup-buttom[data-v-5c02fcf1]{width:%?690?%;height:%?90?%;line-height:%?90?%}.setup-buttom[data-v-5c02fcf1]{height:%?90?%;width:%?690?%;background:#020202;margin:0 auto;position:relative}.head[data-v-5c02fcf1],.order_header[data-v-5c02fcf1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.head[data-v-5c02fcf1]{height:%?88?%;padding:0 %?30?%;border-bottom:1px solid #eee;font-size:%?40?%;color:#242424}.head_img[data-v-5c02fcf1]{width:%?24?%;height:%?36?%}.head_search[data-v-5c02fcf1]{width:%?40?%;height:%?40?%;visibility:hidden}.order_header[data-v-5c02fcf1]{-webkit-justify-content:space-around;justify-content:space-around;width:100%;border-bottom:1px solid #d2d2d2}.recharge_money .span[data-v-5c02fcf1]{width:25%}.choose_ul[data-v-5c02fcf1]{background-color:#fff;position:relative}.choose_ul>li[data-v-5c02fcf1]:first-child{font-size:%?28?%}.pay_div[data-v-5c02fcf1]{position:relative;width:50%}.pay_div>p[data-v-5c02fcf1]{position:absolute;top:%?6?%;left:%?64?%}",""])},6042:function(e,t,a){"use strict";a.r(t);var i=a("5152"),n=a("8b1f");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("453f");var c=a("2877"),s=Object(c["a"])(n["default"],i["a"],i["b"],!1,null,"2dde4b93",null);t["default"]=s.exports},"623e":function(e,t,a){"use strict";a.r(t);var i=a("c457"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);t["default"]=n.a},"830e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("lktauthorize",{ref:"lktAuthorizeComp",on:{pChangeLoginStatus:function(t){arguments[0]=t=e.$handleEvent(t),e.changeLoginStatus.apply(void 0,arguments)}}}),a("heads",{attrs:{title:e.title}}),a("div",{staticClass:"recharge_ts"},[e._v("充值以后可以使用余额进行交易支付")]),a("div",{staticClass:"recharge_money"},[a("span",{staticClass:"span"},[e._v("充值金额")]),a("v-uni-input",{attrs:{"placeholder-style":"color: #b8b8b8;",type:"digit",min:"0.01",maxlength:"9",value:e.price,placeholder:e.rechargeTitle},on:{blur:function(t){arguments[0]=t=e.$handleEvent(t),e._money.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e._checkValue.apply(void 0,arguments)}}})],1),a("ul",{staticClass:"choose_ul"},[a("li",{staticClass:"pay"},[e._v("请选择支付方式")]),a("li",{staticClass:"pay",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._pay(1)}}},[a("div",{staticClass:"pay_div"},[a("img",{staticClass:"pay_img",attrs:{src:e.pay[1].img}}),a("p",[e._v("微信支付")])]),a("img",{staticClass:"quan_img",attrs:{src:e.quan_hei}})])]),a("div",{staticClass:"setup-buttom",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pay1()}}},[e._v("立即充值")])],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"859d":function(e,t,a){"use strict";var i=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("c5f6");var n=i(a("cebc")),o=i(a("e814")),c=a("2f62"),s=a("aa16"),r={data:function(){return{flag:!0,bback:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/bback.png",back:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png"}},computed:{halfWidth:function(){var e=(0,s.getStorage)("data_height")?(0,s.getStorage)("data_height"):this.$store.state.data_height,t=(0,o.default)(e);return t+"px"},BoxHeight:function(){var e=(0,s.getStorage)("data_height")?(0,s.getStorage)("data_height"):this.$store.state.data_height,t=0,a=(0,o.default)(e)+uni.upx2px(88);return t=a&&a>0?a:uni.upx2px(88),t+"px"}},onLoad:function(e){console.log("header"),console.log(this.returnR)},props:["title","returnR","navWhite","returnFlag"],methods:(0,n.default)({},(0,c.mapMutations)({status:"data_height"}),{_back:function(){this.flag=!1,console.log(this.returnR)},_back1:function(){switch(this.flag=!1,Number(this.returnR)){case 1:uni.navigateBack({delta:2});break;case 2:uni.switchTab({url:"../tabBar/shoppingCart"});break;case 3:uni.redirectTo({url:"../login/login.vue"});break;case 4:uni.navigateBack({delta:3});break;case 5:uni.redirectTo({url:"../order/myOrder"});break;case 6:uni.switchTab({url:"../../pages/tabBar/home"});break;case 7:uni.switchTab({url:"../../pages/tabBar/my"});break;case 8:uni.switchTab({url:"../tabBar/my"});break;case 9:uni.redirectTo({url:"/pagesA/myStore/myStore"});break;default:getCurrentPages().length>1?uni.navigateBack({delta:1}):uni.switchTab({url:"/pages/tabBar/home"})}this.flag=!0}})};t.default=r},"8b1f":function(e,t,a){"use strict";a.r(t);var i=a("859d"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);t["default"]=n.a},aa16:function(e,t,a){"use strict";function i(e,t){uni.setStorage({key:e,data:t,success:function(){console.log("setSuccess")}})}function n(e){var t;return uni.getStorage({key:e,success:function(e){t=e.data,console.log("getSuccess")}}),t}function o(e){uni.removeStorage({key:e,success:function(e){console.log("removeSuccess")}})}Object.defineProperty(t,"__esModule",{value:!0}),t.setStorage=i,t.getStorage=n,t.removeStorage=o},c457:function(e,t,a){"use strict";var i=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=i(a("3b8d")),o=i(a("f499")),c=i(a("795b"));a("c5f6"),a("28a5");var s=i(a("6042")),r=(a("aa16"),{data:function(){return{title:"充值",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehei2x.png",pay_bd:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/baiduzhifu2x.png",pay:[{img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",name:"支付宝"},{img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",name:"微信支付"}],pay_index:-1,pay_style:"",price:"",enterPay:!1,access_id:"",fastTap:!0,pay_provider:"alipay",aliPayStatue:!1,wxPayStatue:!1,order_list:"",code:"",firstFlag:!0,value_inp:"",min_amount:"",rechargeTitle:"",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png"}},onLoad:function(){var e=this;e.$nextTick(function(){e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../login/login?landing_code=1",function(){e.access_id=uni.getStorageSync("access_id")?uni.getStorageSync("access_id"):e.$store.state.access_id,e._pay(0),e._pay(1),e._axios()})})},onShow:function(){var e=window.location.href;if(console.log("当前地址="+e),e.split("?").length>1){var t=e.split("?")[1],a=t.split("&");for(var i in a)"String"!=typeof a[i]&&"string"!=typeof a[i]||"code"==a[i].substring(0,4)&&(t=a[i].substring(5),this.code=t);console.log("code="+this.code)}console.log("code="+this.code),""==this.code&&this.toUrl()},watch:{price:function(e,t){this.$nextTick(function(){if(e>.01)if(0==Math.abs(e-t)){this.enterPay=!0;var a=Number(e);isNaN(a)?this.price="0":this.price=a}else if(Math.abs(e-t)<.01){this.enterPay=!0;var i=Number(e).toFixed(2);isNaN(i)?this.price="0":this.price=i}else{this.enterPay=!0;var n=Number(e);isNaN(n)?this.price="0":this.price=n}else this.enterPay=!1})}},methods:{changeLoginStatus:function(){var e=this;e.access_id=uni.getStorageSync("access_id"),e._axios()},_back:function(){uni.navigateBack({delta:1})},_axios:function(){var e=this,t={module:"app",action:"recharge",app:"index",access_id:this.access_id};uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){200==t.data.code&&(console.log(t),e.min_amount=t.data.min_cz,console.log(e.min_amount),e.rechargeTitle="金额不小于".concat(e.min_amount,"元 !"))}})},_money:function(e){var t=this;console.log(t.min_amount),t.price=Number(e.detail.value);var a=Number(t.min_amount);t.price<a&&(t.price="",uni.showToast({title:"充值金额不小于".concat(a,"元,请重新输入!"),duration:1500,icon:"none"})),t.fastTap=!0},toUrl:function(){var e=this,t=window.location.href,a=uni.getStorageSync("access_id"),i={type:"jsapi_wechat",access_id:a,app:"get_config",module:"app",action:"commcenter",url:t};uni.request({data:i,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){if(console.log(t),200==t.data.code){var a=t.data.data.config.appid;e.myappid=a;var i=t.data.data.url,n="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+a+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=n}else uni.showToast({title:t.data.message,duration:1500,icon:"none"})},error:function(e){console.log(e)}})},_checkValue:function(e){var t=this;console.log(t.min_amount),t.price=Number(e.detail.value);var a=Number(t.min_amount);t.price<a?t.fastTap=!1:t.fastTap=!0},pay1:function(){var e=this,t=e.LaiKeTuiCommon.ttIOSCantVisualpay();if(t&&this.fastTap){if(this.fastTap=!1,this.firstFlag=!1,""==this.price)return uni.showToast({title:"请输入充值金额！",duration:1e3,icon:"none"}),this.fastTap=!0,void(this.firstFlag=!0);uni.showLoading({title:"正在请求支付...",mask:!0}),this.pay_wx()}},baidu_pay:function(){},tt_pay:function(){},getOrderInfo:function(e){var t=this;if(console.log("start##getOrderInfo"),console.log(e),!e)return uni.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),void(t.firstFlag=!0);(new Date).getTime();var a={access_id:this.access_id,order_list:t.order_list,sNo:t.getCZNo(),title:"充值",module:"app",action:"pay",type:e,total:t.price};uni.hideLoading(),a.code=this.code,console.log("获取请求数据:");var i=t.LaiKeTuiCommon.getMPAliAuthCode();return i.then(function(e){return new c.default(function(e,t){console.log(uni.getStorageSync("url")),console.log((0,o.default)(a,null,4)),uni.request({url:uni.getStorageSync("url"),data:a,success:function(t){200==t.statusCode&&e(t)},fail:function(e){}})})})},getCZNo:function(){var e=(new Date).getTime();return"CZ"+e+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())},alipay_minipay:function(){},rechargeSuccess:function(e){var t=this;setTimeout(function(){uni.redirectTo({url:"rechargeSuccess?mylei=1&money="+t.price+"&_type="+e})},1e3)},weixinPay:function(){var e=this,t=this;this.loading=!0,uni.login({provider:"weixin",success:function(a){var i="mini_wechat",n={code:a.code,access_id:e.access_id,sNo:t.getCZNo(),title:"充值",module:"app",action:"pay",type:i,total:t.price};console.log((0,o.default)(n,null,4)),uni.request({url:uni.getStorageSync("url"),data:n,success:function(e){if(console.log((0,o.default)(e,null,4)),200===e.statusCode)if(200==e.statusCode){var a=e.data;console.log("@@"),console.log((0,o.default)(a)),uni.requestPayment({provider:"wxpay",timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:"MD5",paySign:a.paySign,success:function(e){uni.showToast({title:"充值成功！",duration:1e3,icon:"none"}),setTimeout(function(){uni.redirectTo({url:"rechargeSuccess?mylei=1&type=wx&_type=wx&money="+t.price})},1e3),uni.hideLoading()},fail:function(e){uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading()}})}else uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading();else uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}})},fail:function(a){console.log("fail",a),e.loading=!1,uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading()}})},fail:function(a){console.log("fail",a),e.loading=!1,uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading()}})},_payFail:function(){var e=this;uni.showModal({title:"提示",content:"支付失败，返回我的钱包！",success:function(t){console.log(t),e.firstFlag=!0,console.log("H5"+uni.getStorageSync("h5_url"));var a=uni.getStorageSync("h5_url")+"pagesB/myWallet/myWallet";t.cancel&&(a=uni.getStorageSync("h5_url")+"pages/tabBar/home"),setTimeout(function(){window.location.href=a},1e3)}})},pay_wx:function(){var e=(0,n.default)(regeneratorRuntime.mark(function e(){var t,a,i,n,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,a="app_wechat",1,"",console.log("this.pay_provider："+this.pay_provider),"alipay"==t.pay_provider?("alipay",a="alipay"):("wxpay",a="jsapi_wechat",2),console.log("############"+a),e.next=9,t.getOrderInfo(a);case 9:i=e.sent,console.log((0,o.default)(i)),console.log((0,o.default)(i,null,4)),200!==i.statusCode&&t._payFail(),uni.hideLoading(),"alipay"==a?(n=uni.getStorageSync("endurl")+"order/"+t.sNo+"_alipay.html",window.location.href=n):"jsapi_wechat"==a&&(c=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:s.appid,timeStamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign},function(e){t.firstFlag=!0,t.code;var a=window.location.href,i=a.split("#")[0];i.concat("#/pages/pay/payResult");if("get_brand_wcpay_request:ok"==e.err_msg){t.$store.state.payRes=t.order_list;t.price1,t.sNo;window.location.href=uni.getStorageSync("h5_url")+"pagesB/myWallet/myWallet"}else t._payFail()})},s=i.data,"undefined"!=typeof WeixinJSBridge?c(s):"undefined"==typeof WeixinJSBridge&&(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",c,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",c),document.attachEvent("onWeixinJSBridgeReady",c))));case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),_pay:function(e){this.pay_index=e,this.pay_style=e+1,0==e?this.pay_provider="alipay":1==e?this.pay_provider="app_wechat":2==e&&(this.pay_provider="baidu_pay")}},components:{heads:s.default}});t.default=r},fbb0:function(e,t,a){"use strict";var i=a("083c"),n=a.n(i);n.a}}]);