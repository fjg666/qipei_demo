{include file="../../include_path/header.tpl" sitename="公共头部"}{literal}<style>td a{    width: 44%;    margin: 2%!important;    float: left;}.wrap {    width: 60px;    height: 30px;    background-color: #ccc;    border-radius: 16px;    position: relative;    transition: 0.3s;    margin-left: 10px;}.circle {    width: 29px;    height: 29px;    background-color: #fff;    border-radius: 50%;    position: absolute;    left: 0px;    transition: 0.3s;    box-shadow: 0px 1px 5px rgba(0, 0, 0, .5);}.circle:hover {    transform: scale(1.2);    box-shadow: 0px 1px 8px rgba(0, 0, 0, .5);}.stopCss:hover {    cursor: not-allowed;}.stopCss {    width: 56px;    height: 20px;    border: 1px solid #e9ecef;    color: #d8dbe8 !important;    font-size: 12px;    border-radius: 2px;    line-height: 20px;    display: inline-block;}</style>{/literal}</head><body>{include file="../../include_path/nav.tpl" sitename="面包屑"}<div class="pd-20 page_absolute">    <div class="text-c">        <form name="form1" action="index.php" method="get">            <input type="hidden" name="module" value="data_dictionary" />            <input type="hidden" name="action" value="List" />            <input type="text" name="name" size='8' value="{$name}" id="name" placeholder="请输入数据名称" style="width:200px" class="input-text">            <input type="button" value="重置" id="btn8" style="border: 1px solid #D5DBE8; color: #6a7076; height: 31px;" class="reset" onclick="empty()" />            <input name="" id="" class="btn btn-success" type="submit" value="查询" >        </form>    </div>    <div class="page_h16"></div>    <div style="clear:both;" class="page_bgcolor">        <a class="btn newBtn radius" href="javascript:;" onclick="add('')" style="width: 136px;"><img style="margin-right: 2px!important;height: 14px;" src="images/icon1/add.png"/>&nbsp;添加数据名称</a>    </div>    <div class="page_h16"></div>    <div class="mt-20 table-scroll">        <div class="tab_table">            <table class="table-border tab_content">                <thead>                    <tr class="text-c tab_tr">                        <th>数据名称</th>                        <th>是否生效</th>                        <th>添加人</th>                        <th class="tab_time">添加时间</th>                        <th class="tab_editor">操作</th>                    </tr>                </thead>                <tbody>                    {foreach from=$list item=item name=f1 key=k}                    <tr class="text-c tab_td">                        <td>{$item->name}</td>                        <td style="display: flex;align-items: center;justify-content: center;">                            <div class="formControls col-2" style="width: 60px;">                                <div class="status_box">                                    <input type="hidden" class="status" name="status" id="status_{$k}" value="{$item->status}">                                    <div class="wrap" onclick="up({$k},{$item->id}.{$item->status_status})" style="margin: 0;{if $item->status==1}background-color:#5eb95e;{else}background-color: #ccc;{/if}">                                        <div class="circle" id="circle_{$k}" style="{if $item->status==1}left:30px;{else}left:0px;{/if}"></div>                                    </div>                                </div>                            </div>                        </td>                        <td>{$item->admin_name}</td>                        <td class="tab_time">{$item->add_date}</td>                        <td class="tab_editor">                            <div class="tab_block">                                {if $item->status == 0}                                    <a style="text-decoration:none" class="ml-5" href="javascript:;" onclick="add({$item->id})" title="编辑" >                                        <img src="images/icon1/xg.png"/>&nbsp;编辑                                    </a>                                    <a style="text-decoration:none" class="ml-5" href="javascript:void(0);" onclick="confirm('确定要删除此数据吗?',{$item->id},'index.php?module=data_dictionary&action=Del_name&id=','index.php?module=data_dictionary&action=List')">                                        <img src="images/icon1/del.png"/>&nbsp;删除                                    </a>                                {else}                                    <a class="ml-5 stopCss" href="javascript:void(0);" >                                        <img src="images/icon1/xg.png"/>&nbsp;编辑                                    </a>                                    <a class="ml-5 stopCss" href="javascript:void(0);" >                                        <img src="images/icon1/del.png"/>&nbsp;删除                                    </a>                                {/if}                            </div>                        </td>                    </tr>                    {/foreach}                </tbody>            </table>        </div>    </div>    <div class="tbtab" style="text-align: center;display: flex;justify-content: center;">{$pages_show}</div></div>{include file="../../include_path/footer.tpl"}{literal}<script type="text/javascript">// 根据框架可视高度,减去现有元素高度,得出表格高度var Vheight = $(window).height()-56-56-16-36-16-($('.tbtab').text()?70:0)$('.table-scroll').css('height',Vheight+'px')	function empty() {    $("#name").val('');}function add(id) {    var res = '';    var name = '';    var status = '';    var res1 = '';    if(id != ''){        res = 'index.php?module=data_dictionary&action=Modify_name';        res1 = '编辑数据名称';        $.ajax({            cache: true,            type: "GET",            dataType:"json",            url:'index.php?module=data_dictionary&action=Modify_name',            data:{                id:id            },            async: true,            success: function(data) {                id = data.id;                name = data.name;                status = data.status;                if(status == 1){                    var rew = `<div class="form_new_r form_yes">                                    <div class="ra1">                                        <input name="status"  type="radio" checked="checked" style="display: none;" id="status-1" class="inputC1" value="1">                                        <label for="status-1">是</label>                                    </div>                                    <div class="ra1">                                        <input name="status"  type="radio" style="display: none;" id="status-2" class="inputC1" value="0">                                        <label for="status-2">否</label>                                    </div>                                </div>`;                }else{                    var rew = `<div class="form_new_r form_yes">                                    <div class="ra1">                                        <input name="status"  type="radio" style="display: none;" id="status-1" class="inputC1" value="1">                                        <label for="status-1">是</label>                                    </div>                                    <div class="ra1">                                        <input name="status"  type="radio" checked="checked" style="display: none;" id="status-2" class="inputC1" value="0">                                        <label for="status-2">否</label>                                    </div>                                </div>`;                }                add0(res,rew,res1,id,name,status);            }        });    }else{        res = 'index.php?module=data_dictionary&action=Add_name';        res1 = '添加数据名称';        var rew = `<div class="form_new_r form_yes">                        <div class="ra1">                            <input name="status"  type="radio" checked="checked" style="display: none;" id="status-1" class="inputC1" value="1">                            <label for="status-1">是</label>                        </div>                        <div class="ra1">                            <input name="status"  type="radio" style="display: none;" id="status-2" class="inputC1" value="0">                            <label for="status-2">否</label>                        </div>                    </div>`;        add0(res,rew,res1,id,name,status);    }}function add0(res,rew,res1,id,name,status) {    $("body", parent.document).append(`        <div class="maskNew">            <div class="maskNewContent" style="width: 460px;height: 282px !important;">                <div style="border-bottom: 2px solid #E9ECEF;height: 48px;line-height: 40px;">                    <div style="font-size: 16px;margin-left: 19px;font-weight: bold;">${res1}</div>                    <a href="javascript:void(0);" class="closeA" onclick=closeMask1() style="display: block;top:8px"><img src="images/icon1/gb.png"/></a>                </div>                <div >                    <input type="hidden" name="id" id="id" value="${id}">                    <input type="hidden" name="url" id="url" value="index.php?module=data_dictionary&action=List">                    <input type="hidden" name="res" id="res" value="${res}">                    <div class="formListSD" style="margin-bottom: 14px;margin-top: 35px;">                        <div class="formTextSD" style='height: 36px;font-size: 14px;'><span class="must">*</span><span>数据名称：</span></div>                        <div class="formInputSD" style='display: block;'>                            <div class='selectDiv'>                                <input type="text" name="name" id="name" value="${name}" style="width: 302px;" />                            </div>                        </div>                    </div>                    <div class="formListSD">                        <div class="formTextSD" style='height: 36px;font-size: 14px;'><span class="must">*</span><span>是否生效：</span></div>                        ${rew}                    </div>                </div>                <div style="text-align:right;height: 69px;line-height: 69px;margin-top: 8px;">                    <button class="closeMask" onclick=closeMask1() style="margin-right:5px;border: 1px solid #008DEF;border-radius: 2px;background: #fff;color: #008DEF;">取消</button>                    <button onclick=add_name() class="closeMask" style="margin-right:40px;border: 1px solid #008DEF;border-radius: 2px;background: #008DEF;color: #fff;" >保存</button>                </div>            </div>        </div>    `)}// 开启/关闭function up(obj,id,status_status){    if(status_status){        var res = document.getElementById('status_'+obj).value;        if(res == 0){            $('#circle_'+obj).css('left', '30px'),                $('#circle_'+obj).css('background-color', '#fff'),                $('#circle_'+obj).parent(".wrap").css('background-color', '#5eb95e');            $('#status_'+obj).val(1);        }else{            $('#circle_'+obj).css('left', '0px'),                $('#circle_'+obj).css('background-color', '#fff'),                $('#circle_'+obj).parent(".wrap").css('background-color', '#ccc');            $('#status_'+obj).val(0);        }        $.ajax({            type: "POST",            dataType: "json",            url: 'index.php?module=data_dictionary&action=List',            data: {                id:id            },            success: function (data) {                layer.msg(data.status, {time: 2000});            }        });    }else{        layer.msg("已经建立数据关联不能更改！")        return false;    }}function confirm (content,id,url,url1){    $("body",parent.document).append(`        <div class="maskNew">            <div class="maskNewContent">                <a href="javascript:void(0);" class="closeA" onclick=closeMask1() ><img src="images/icon1/gb.png"/></a>                <div class="maskTitle">提示</div>                <div style="text-align:center;margin-top:30px"><img src="images/icon1/ts.png"></div>                <div style="height: 50px;position: relative;top:20px;font-size: 22px;text-align: center;">                    ${content}                </div>                <div style="text-align:center;margin-top:30px">                    <button class="closeMask" style="margin-right:20px" onclick=confirm_modify_close("${id}","${url}","${url1}") >确认</button>                    <button class="closeMask" onclick=closeMask1() >取消</button>                </div>            </div>        </div>    `)}</script>{/literal}</body></html>